<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">

<title>Pages / Login - NiceAdmin Bootstrap Template</title>
<meta content="" name="description">
<meta content="" name="keywords">

<!-- Favicons -->
<link href="/xdm/v1/template/Lonely/assets/img/favicon.png" rel="icon">
<link href="/xdm/v1/template/Lonely/assets/img/apple-touch-icon.png"
	rel="apple-touch-icon">

<!-- Google Fonts -->
<link href="https://fonts.gstatic.com" rel="preconnect">
<link
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
	rel="stylesheet">

<!-- Vendor CSS Files -->
<link
	href="/xdm/v1/template/Lonely/assets/vendor/bootstrap/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="/xdm/v1/template/Lonely/assets/vendor/bootstrap-icons/bootstrap-icons.css"
	rel="stylesheet">
<link
	href="/xdm/v1/template/Lonely/assets/vendor/boxicons/css/boxicons.min.css"
	rel="stylesheet">
<link href="/xdm/v1/template/Lonely/assets/vendor/quill/quill.snow.css"
	rel="stylesheet">
<link
	href="/xdm/v1/template/Lonely/assets/vendor/quill/quill.bubble.css"
	rel="stylesheet">
<link
	href="/xdm/v1/template/Lonely/assets/vendor/remixicon/remixicon.css"
	rel="stylesheet">
<link
	href="/xdm/v1/template/Lonely/assets/vendor/simple-datatables/style.css"
	rel="stylesheet">

<!-- Template Main CSS File -->
<link href="/xdm/v1/template/Lonely/assets/css/style.css"
	rel="stylesheet">

<!-- =======================================================
  * Template Name: NiceAdmin
  * Template URL: https://bootstrapmade.com/nice-admin-bootstrap-admin-html-template/
  * Updated: Apr 20 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

	<main>
		<div class="container">

			<section
				class="section register min-vh-100 d-flex flex-column align-items-center justify-content-center py-4">
				<div class="container">
					<div class="row justify-content-center">
						<div
							class="col-lg-4 col-md-6 d-flex flex-column align-items-center justify-content-center">

							<div class="d-flex justify-content-center py-4">
								<a href="#" class="logo d-flex align-items-center w-auto"> <img
									src="/xdm/v1/template/Lonely/assets/img/logo.png"> <span
									class="d-none d-lg-block">Sign in</span>
								</a>
							</div>
							<!-- End Logo -->

							<div class="card mb-3">
								<div class="card-body">
									<div class="pt-4 pb-2">
										<h5 class="card-title text-center pb-0 fs-4">Sign in to
											Your Account</h5>
										<p class="text-center small">Enter your id & password to
											sign in</p>
									</div>
									<form class="row g-3 needs-validation needs-invalidation" name="form" id="form" novalidate>
										<div class="col-12">
											<label for="yourUsername" class="form-label">ID</label> 
											<input type="text" name="usrId" class="form-control" id="usrId" placeholder="영대소문자, 숫자조합 6~15자" value="doyoung0908" required>
											<div class="invalid-feedback" id="usrIdFeedback">아이디를 입력해 주세요.</div>
											<div class="invalid-feedback" id="usrIdRegExpFeedback">아이디는 영문자, 숫자조합 6~15자로 입력해 주세요.</div>
										</div>
										<div class="col-12">
											<label for="yourPassword" class="form-label">PW</label> 
											<input type="password" name="usrPw" class="form-control" id="usrPw" placeholder="영대소문자, 숫자, 특수문자!@#$%^*+=-조합 8~15자" value="doyoung0908!@" required>
											<div class="invalid-feedback" id="usrPwFeedback">비밀번호를 입력해주세요!</div>
											<div class="invalid-feedback" id="usrPwRegExpFeedback">비밀번호는 영문자, 숫자, 특수문자!@#$%^*+=-조합 8~15자로 입력해주세요!</div>
										</div>
										<div class="col-12">
											<div class="form-check">
												<input class="form-check-input" type="checkbox" name="remember" value="true" id="rememberMe"> 
													<label class="form-check-label" for="rememberMe">ID 저장하기</label>
											</div>
										</div>
										<div class="col-12">
											<button class="btn btn-primary w-100" type="button" id="btnSubmit">
												Sign in
											</button>
										</div>
										<div class="col-12">
											<p class="small mb-0">
												아직 회원이 아니신가요? <a href="pages-register.html">회원가입</a>
											</p>
										</div>
									</form>
									<!-- Vertically centered Modal -->
						              <div class="modal fade" id="verticalycentered" tabindex="-1">
						                <div class="modal-dialog modal-dialog-centered">
						                  <div class="modal-content">
						                    <div class="modal-header">
						                      <h5 class="modal-title">확인</h5>
						                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						                    </div>
						                    <div class="modal-body">
						                      일치하는 회원이 존재하지 않습니다.
						                    </div>
						                    <div class="modal-footer">
						                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">취소</button>
						                      <button type="button" class="btn btn-primary" data-bs-dismiss="modal">확인</button>
						                    </div>
						                  </div>
						                </div>
						              </div>
						             <!-- End Vertically centered Modal-->
								</div>
							</div>
						</div>
					</div>
				</div>

			</section>

		</div>
	</main>
	<!-- End #main -->

	<a href="#"
		class="back-to-top d-flex align-items-center justify-content-center"><i
		class="bi bi-arrow-up-short"></i></a>

	<!-- Vendor JS Files -->
	<script
		src="/xdm/v1/template/Lonely/assets/vendor/apexcharts/apexcharts.min.js"></script>
	<script
		src="/xdm/v1/template/Lonely/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
	<script
		src="/xdm/v1/template/Lonely/assets/vendor/chart.js/chart.umd.js"></script>
	<script
		src="/xdm/v1/template/Lonely/assets/vendor/echarts/echarts.min.js"></script>
	<script src="/xdm/v1/template/Lonely/assets/vendor/quill/quill.js"></script>
	<script
		src="/xdm/v1/template/Lonely/assets/vendor/simple-datatables/simple-datatables.js"></script>
	<script
		src="/xdm/v1/template/Lonely/assets/vendor/tinymce/tinymce.min.js"></script>
	<script
		src="/xdm/v1/template/Lonely/assets/vendor/php-email-form/validate.js"></script>

	<!-- Template Main JS File -->
	<script src="/xdm/v1/template/Lonely/assets/js/main.js"></script>

	<!-- by developer -->
	<script src="/xdm/v1/jquery/jquery-3.7.1.min.js"></script>


	<script type="text/javascript">

		document.getElementById("btnSubmit").onclick = function() {
			// validation
			// usrId
			var usrId = document.getElementById("usrId");
			var usrIdValue = document.getElementById("usrId").value.trim();
			var usrIdRegExp = /^(?=.*[a-zA-Z])(?=.*[0-9]).{6,15}$/;		// 영대소문자, 숫자포함 6~15자
			var usrIdFeedback = document.getElementById("usrIdFeedback");
			var usrIdRegExpFeedback = document.getElementById("usrIdRegExpFeedback");
			
			// 기존 validation 초기화
			usrId.classList.remove('is-valid', 'is-invalid');
			usrIdFeedback.style.display='none';
			usrIdRegExpFeedback.style.display='none';
			
			if(usrIdValue == "" || usrIdValue == null){
				usrIdFeedback.style.display='block';
				usrId.classList.add('is-invalid');
				usrId.focus();
				return false;
			} else {
// 				by pass
			}
			if(!usrIdRegExp.test(usrIdValue)){
				usrIdRegExpFeedback.style.display='block';
				usrId.classList.add('is-invalid');
				usrId.focus();
				return false;
			} else {
// 				by pass
				usrId.classList.add('is-valid');
			}
			
			// usrPw
			var usrPw = document.getElementById("usrPw");
			var usrPwValue = document.getElementById("usrPw").value.trim();
			var usrPwRegExp = /^(?=.*[a-zA-Z])(?=.*[0-9])(?=.*[!@#$%^*+=-]).{8,15}$/;	// 영대소문자, 숫자, 특수문자!@#$%^*+=- 포함 8~15자
			var usrPwFeedback = document.getElementById("usrPwFeedback");
			var usrPwRegExpFeedback = document.getElementById("usrPwRegExpFeedback");
			
			// 기존 validation 초기화
			usrPw.classList.remove('is-valid', 'is-invalid');
			usrPwFeedback.style.display='none';
			usrPwRegExpFeedback.style.display='none';
			
			if(usrPwValue == "" || usrPwValue == null){
				usrPwFeedback.style.display='block';
				usrPw.classList.add('is-invalid');
				usrPw.focus();
				return false;
			} else {
// 				by pass
			}
			if(!usrPwRegExp.test(usrPwValue)){
				usrPwRegExpFeedback.style.display='block';
				usrPw.classList.add('is-invalid');
				usrpw.focus();
				return false;
			} else {
// 				by pass
				usrPw.classList.add('is-valid');
			}
			
			
			// Login Ajax
			$.ajax({ // AJAX 요청을 시작하는 jQuery 메서드
				async : true // 요청을 비동기로 처리 (기본값이 true라 생략 가능)
				, cache : false // 요청 결과를 캐시하지 않도록 설정
				, type : "post" // HTTP 메서드를 POST로 설정
				/* ,dataType:"json" */
				, url : "/xdm/v1/infra/user/userXdmSigninProc" // 요청을 보낼 URL
				/* ,data : $("#formLogin").serialize() */
				, data : {
					"usrId" : $("#usrId").val(), // 사용자 ID를 가져와서 전송
					"usrPw" : $("#usrPw").val()
				// 비밀번호를 가져와서 전송
				//, "autoLogin": $("#autoLogin").is(":checked")
				},
				success : function(response) { // 요청이 성공적으로 완료되면 실행될 함수
					if (response.rt == "success") { // 응답의 rt 속성이 "success"일 경우
						usrPw.classList.add('is-valid');
						location.href = "/xdm/v1/infra/user/userXdmMain"; // 메인 페이지로 리다이렉션
					} else { // 로그인 실패 시 모달 창을 띄움
						$("#verticalycentered").modal("show");  // 모달을 표시
						usrPwRegExpFeedback.style.display='block';
						usrPw.classList.add('is-invalid');
					}
				}
			});
		}
	</script>

</body>

</html>